---
Type: AWS::RDS::DBInstance
Properties:
  VPCSecurityGroups:
    - ${self:custom.awsRdsSecurityGroup}
  Engine: ${self:custom.awsRdsEngine}
  EngineVersion: ${self:custom.awsRdsEngineVersion}
  MasterUsername: ${self:custom.dbUser}
  MasterUserPassword: ${self:custom.dbPassword}
  PubliclyAccessible: true
  DBParameterGroupName: ${self:custom.awsRdsParameterGroup}
  DBSubnetGroupName: ${self:custom.awsRdsSubnetGroup}

  #
  # Big settings
  StorageType: gp2
  # DBInstanceClass: db.m4.large  # just under 15m for monthly data set import
  DBInstanceClass: ${self:custom.dbInstance}
  AllocatedStorage: ${self:custom.dbStorage}
  
  # # Small settings
  # StorageType: Standard
  # AllocatedStorage: 20
  # DBInstanceClass: db.t2.micro
DeletionPolicy: Delete