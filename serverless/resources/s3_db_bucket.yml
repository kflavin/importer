---
Type: "AWS::S3::Bucket"
Properties:
  BucketName: importer-${self:custom.environment}-dbbackup
  LifecycleConfiguration:
    Rules:
      - Prefix: backups
        ExpirationInDays: 7
        Status: Enabled
  PublicAccessBlockConfiguration:
    BlockPublicAcls: true
    IgnorePublicAcls: true
    BlockPublicPolicy: true
    RestrictPublicBuckets: true
  BucketEncryption:
    ServerSideEncryptionConfiguration:
      - ServerSideEncryptionByDefault:
          SSEAlgorithm: AES256
DeletionPolicy: ${file(./serverless/db_backup/serverless.env.yml):${self:custom.environment}.deletion_policy}

