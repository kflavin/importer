---
handler: lambdas/products/loader.handler
description: Loads RxNorm product data
environment:
  aws_instance_type: ${file(./serverless/products/serverless.env.yml):${self:custom.environment}.instance_type}
  table_name: ${file(./serverless/products/serverless.env.yml):${self:custom.environment}.products_table_name}
  synonyms_table_name: ${file(./serverless/products/serverless.env.yml):${self:custom.environment}.synonyms_table_name}
vpc:
  securityGroupIds:
    - ${file(./serverless/serverless.env.yml):${self:custom.environment}.aws_security_groups}
  subnetIds:
    - ${file(./serverless/serverless.env.yml):${self:custom.environment}.aws_lambda_subnet_1}
    - ${file(./serverless/serverless.env.yml):${self:custom.environment}.aws_lambda_subnet_2}
    - ${file(./serverless/serverless.env.yml):${self:custom.environment}.aws_lambda_subnet_3}
events:
  - schedule:
      rate: ${self:custom.schedule.products.${self:custom.environment}.rate}
      enabled: ${self:custom.schedule.products.${self:custom.environment}.enabled}
      name: ${self:custom.environment}-products-loader
      description: Triggers RxNorm Product loader
