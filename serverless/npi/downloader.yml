---
handler: lambdas/npi/downloader.handler
description: Downloads NPI files
environment:
  npi_log_table_name: ${file(./serverless/npi/serverless.env.yml):${self:custom.environment}.npi_log_table_name}
timeout: ${file(./serverless/npi/serverless.env.yml):${self:custom.environment}.downloader_timeout}
events:
  - schedule:
      rate: ${self:custom.schedule.npi.downloader.${self:custom.environment}.rate}
      enabled: ${self:custom.schedule.npi.downloader.${self:custom.environment}.enabled}
      name: ${self:custom.environment}-npi-downloader
      description: Triggers NPI file download
vpc:
  securityGroupIds:
    - ${file(./serverless/products/serverless.env.yml):${self:custom.environment}.instance_type}
  subnetIds:
    - ${file(./serverless/products/serverless.env.yml):${self:custom.environment}.aws_lambda_subnet_1}
    - ${file(./serverless/products/serverless.env.yml):${self:custom.environment}.aws_lambda_subnet_2}
    - ${file(./serverless/products/serverless.env.yml):${self:custom.environment}.aws_lambda_subnet_3}